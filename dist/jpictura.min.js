function heightCalculator(t,a,i){function e(t){o(t),n(t),s()}function o(t){var a=0,i=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;u=t/((t-a)/i+e)}function n(t){var a=0,i=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;e*i>t?(f.debug&&g("The max width/height ratio "+e+" is too big for row width "+t+"px."),h=t*e):h=t/((t+a)/i-e)}function r(t,a){var i,e,o=0;do i=d(t,c,!1,f),i>a?h=c:u=c,s(u,h),e=!1,i>a&&(e=!0),a-i>f.algorithm.epsilon&&(e=!0),++o>=f.algorithm.maxIterationCount&&(e=!1);while(e);return o>=f.algorithm.maxIterationCount&&f.debug&&g("Max "+o+" iterations reached. Current precision: "+(a-i)+"."),c}function s(){c=(u+h)/2}function l(t,a,i){t=Math.floor(t);var e;do e=d(a,t,!0,f);while(i>e&&t++);return t}var u,h,c,g=a,d=t,f=i;this.getHeight=function(t,a){if(0===t.length)return 0;e(a);var i=r(t,a);return i=l(i,t,a)}}/*!
 * jPictura v1.1.5
 * https://github.com/anmarcek/jpictura.git
 *
 * Copyright (c) 2014-2016 Anton Marček
 * Released under the MIT license
 *
 * Date: 2016-02-05T10:22:51.892Z
 */
!function(t){function a(t,a){t.addClass(a.classes.container),a.layout.stretchImages&&t.addClass("stretch-images"),a.layout.centerImages&&t.addClass("center-images"),a.layout.allowCropping||t.addClass("disable-cropping-images"),a.effects.fadeInItems&&t.addClass("fade-in-items");var e=t.find(a.selectors.item);e.addClass(a.classes.item),e.addClass("invisible");var n=e.find(a.selectors.image);n.addClass(a.classes.image),i(t,e,a,o)}function i(t,a,i,o){i.waitForImages?e(t,a,i,o):o(t,a,i)}function e(a,i,e,o){function n(t,n){var s=n.width/n.height;d(t,s),++r===i.size()&&o(a,i,e)}var r=0;i.each(function(){var a=t(this),i=a.find(e.selectors.image),o=new Image;o.src=i.attr("src"),t(o).load(function(){n(a,o)})})}function o(a,i,e){var o=(new Date).getTime(),u=i.size(),h=[],c=a.width()-2*e.layout.rowPadding,g=new e.heightCalculator(l,f,e);i.each(function(a){var i=t(this),o=a+1===u;if(0===h.length)h.push(i);else{var l=h.slice(0);if(l.push(i),n(l,c,e)){var d=r(h,c,g,e),f=r(l,c,g,e),m=t.fn.jpictura.evaluate(d,e),p=t.fn.jpictura.evaluate(f,e);m>p?h.push(i):(s(h,c,d,o,e),h=[],h.push(i))}else h.push(i)}});var d=n(h,c,e)||e.layout.justifyLastRow?r(h,c,g,e):e.layout.idealRowHeight;s(h,c,d,!0,e);var m=(new Date).getTime();e.debug&&f("Gallery created in "+(m-o)+" milliseconds.")}function n(t,a,i){for(var e=(t.length-1)*i.layout.itemSpacing,o=0;o<t.length;o++)e+=h(t[o],i.layout.idealRowHeight,i);return e>a}function r(t,a,i,e){var o=u(t,a,e),n=i.getHeight(t,o);return n}function s(t,a,i,e,o){var n=l(t,i,!0,o),r=u(t,a,o),s=n-r,g=t.slice(0);g.sort(function(t,a){return h(a,i,o)-h(t,i,o)});for(var d=s,f=0;f<g.length;f++){var m,p=g[f],v=h(p,i,o);d>=0?(m=Math.ceil(v/r*s),m>d&&(m=d),d-=m):m=0,v=Math.floor(v)-m,p.width(v),p.height(i),p.removeClass("invisible");var w=p===t[0],y=p===t[t.length-1];p.toggleClass(o.classes.lastRow,e),p.toggleClass(o.classes.firstInRow,w),p.toggleClass(o.classes.lastInRow,y),o.layout.applyRowPadding&&(w&&p.css("margin-left",o.layout.rowPadding+"px"),y&&p.css("margin-right",o.layout.rowPadding+"px")),o.layout.applyItemSpacing&&(y||p.css("margin-right",o.layout.itemSpacing+"px"),e||p.css("margin-bottom",o.layout.itemSpacing+"px"));var C=c(p,!1,o)*i;C>=v?p.addClass("stretch-by-height"):p.addClass("stretch-by-width"),Math.abs(C-v)>o.layout.croppingEpsilon&&p.addClass("cropped-if-stretched");var R=p.find(o.selectors.image);Math.abs(R.width()-v)>1&&R.addClass("horizontal-misfit"),Math.abs(R.height()-i)>1&&R.addClass("vertical-misfit")}}function l(t,a,i,e){for(var o=0,n=0;n<t.length;n++){var r=h(t[n],a,e);i&&(r=Math.floor(r)),o+=r}return o}function u(t,a,i){return a-(t.length-1)*i.layout.itemSpacing}function h(t,a,i){var e=c(t,!0,i)*a;return e}function c(t,a,i){var e=p+"-ratio",o=t.data(e);if(void 0===o&&(o=g(t,i),t.data(e,o)),a){if(o<=i.layout.minWidthHeightRatio)return i.layout.minWidthHeightRatio;if(o>=i.layout.maxWidthHeightRatio)return i.layout.maxWidthHeightRatio}return o}function g(t,a){var i=t.data(p+"-width"),e=t.data(p+"-height");if(void 0===i||void 0===e){var o=t.find(a.selectors.image);i=o.prop("naturalWidth"),e=o.prop("naturalHeight")}var n=i/e;return n}function d(t,a){var i=p+"-ratio";t.data(i,a)}function f(t){window.console&&console.log(m+": "+t)}t.fn.jpictura=function(i){var e=t.extend(!0,{},t.fn.jpictura.defaults,i);return this.each(function(){a(t(this),e)}),this};var m="jPictura",p=m.toLowerCase();t.fn.jpictura.defaults={selectors:{item:".item",image:"img"},classes:{container:p,item:p+"-item",image:p+"-image",lastRow:p+"-last-row",firstInRow:p+"-first-in-row",lastInRow:p+"-last-in-row"},layout:{rowPadding:0,applyRowPadding:!0,itemSpacing:5,applyItemSpacing:!0,idealRowHeight:180,minWidthHeightRatio:1/3,maxWidthHeightRatio:3,stretchImages:!0,allowCropping:!0,croppingEpsilon:3,centerImages:!0,justifyLastRow:!1},effects:{fadeInItems:!1},waitForImages:!0,heightCalculator:heightCalculator,algorithm:{epsilon:.01,maxIterationCount:100},debug:!1},t.fn.jpictura.evaluate=function(t,a){return Math.abs(t-a.layout.idealRowHeight)}}(jQuery);