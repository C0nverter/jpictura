function heightCalculator(t,i,a){function e(t){n(t),o(t),r()}function n(t){var i=0,a=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;u=t/((t-i)/a+e)}function o(t){var i=0,a=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;e*a>=t?(f.debug&&d("The max width/height ratio "+e+" is too big for row width "+t+"px."),h=t*e):h=t/((t+i)/a-e)}function s(t,i){var a,e,n=0;do a=g(t,c,!1,f),a>i?h=c:u=c,r(u,h),e=!1,a>i&&(e=!0),i-a>f.algorithm.epsilon&&(e=!0),++n>=f.algorithm.maxIterationCount&&(e=!1);while(e);return n>=f.algorithm.maxIterationCount&&f.debug&&d("Max "+n+" iterations reached. Current precision: "+(i-a)+"."),c}function r(){c=(u+h)/2}function l(t,i,a){t=Math.floor(t);var e;do e=g(i,t,!0,f);while(a>e&&t++);return t}var u,h,c,d=i,g=t,f=a;this.getHeight=function(t,i){if(0===t.length)return 0;e(i);var a=s(t,i);return a=l(a,t,i)}}/*!
 * jPictura v1.1.8
 * https://github.com/anmarcek/jpictura.git
 *
 * Copyright (c) 2014-2016 Anton Marček
 * Released under the MIT license
 *
 * Date: 2016-02-05T13:55:01.134Z
 */
!function(t){function i(t,i){t.addClass(i.classes.container),i.layout.stretchImages&&t.addClass("stretch-images"),i.layout.centerImages&&t.addClass("center-images"),i.layout.allowCropping||t.addClass("disable-cropping-images"),i.effects.fadeInItems&&t.addClass("fade-in-items");var e=t.find(i.selectors.item);e.addClass(i.classes.item),e.addClass(i.classes.invisible);var o=e.find(i.selectors.image);o.addClass(i.classes.image),a(t,e,i,n)}function a(t,i,a,n){a.waitForImages?e(t,i,a,n):n(t,i,a)}function e(i,a,e,n){function o(t,o){var r=o.width/o.height;j(t,r),++s===a.size()&&n(i,a,e)}var s=0;a.each(function(){var i=t(this),a=i.find(e.selectors.image),n=new Image;n.src=a.attr("src"),t(n).load(function(){o(i,n)})})}function n(i,a,e){var n=(new Date).getTime(),l=a.size(),u=[],h=i.width()-2*e.layout.rowPadding,c=new e.heightCalculator(I,D,e);a.each(function(i){var a=t(this),n=i+1===l;if(0===u.length)u.push(a);else{var d=u.slice(0);if(d.push(a),o(d,h,e)){var g=s(u,h,c,e),f=s(d,h,c,e),m=t.fn.jpictura.evaluate(g,e),p=t.fn.jpictura.evaluate(f,e);m>p?u.push(a):(r(u,h,g,n,e),u=[],u.push(a))}else u.push(a)}});var d=o(u,h,e)||e.layout.justifyLastRow?s(u,h,c,e):e.layout.idealRowHeight;r(u,h,d,!0,e);var g=(new Date).getTime();e.debug&&D("Gallery created in "+(g-n)+" milliseconds.")}function o(t,i,a){for(var e=(t.length-1)*a.layout.itemSpacing,n=0;n<t.length;n++)e+=b(t[n],a.layout.idealRowHeight,a);return e>i}function s(t,i,a,e){var n=W(t,i,e),o=a.getHeight(t,n);return o}function r(t,i,a,e,n){for(var o=I(t,a,!0,n),s=W(t,i,n),r={row:t,width:i,height:a,isLastRow:e,itemsSpaceWidth:s,itemsWidthDelta:o-s,unassignedItemsWidthDelta:o-s},h=l(t,n),c=0;c<h.length;c++)u(h[c],r,n)}function l(t,i){var a=t.slice(0);return a.sort(function(t,a){return H(a,!0,i)-H(t,!0,i)}),a}function u(t,i,a){var e=i.row,n=i.isLastRow,o=t===e[0],s=t===e[e.length-1],r=h(t,i,a),l=i.height,u=t.find(a.selectors.image);d(t,r,l),g(t,a),f(t,n,o,s,a),m(t,o,s,a),p(t,s,n,a),w(t,r,l,a),v(u,r,l,a)}function h(t,i,a){var e=b(t,i.height,a),n=c(e,i),o=Math.floor(e)-n;return o}function c(t,i){if(i.unassignedItemsWidthDelta<=0)return 0;var a=Math.ceil(t/i.itemsSpaceWidth*i.itemsWidthDelta);return i.unassignedItemsWidthDelta<a&&(a=i.unassignedItemsWidthDelta),i.unassignedItemsWidthDelta-=a,a}function d(t,i,a){t.width(i),t.height(a)}function g(t,i){t.removeClass(i.classes.invisible)}function f(t,i,a,e,n){t.toggleClass(n.classes.lastRow,i),t.toggleClass(n.classes.firstInRow,a),t.toggleClass(n.classes.lastInRow,e)}function m(t,i,a,e){e.layout.applyRowPadding&&(i&&t.css("margin-left",e.layout.rowPadding+"px"),a&&t.css("margin-right",e.layout.rowPadding+"px"))}function p(t,i,a,e){e.layout.applyItemSpacing&&(i||t.css("margin-right",e.layout.itemSpacing+"px"),a||t.css("margin-bottom",e.layout.itemSpacing+"px"))}function w(t,i,a,e){var n=H(t,!1,e)*a;n>=i?t.addClass("stretch-by-height"):t.addClass("stretch-by-width"),y(n,i,e)&&t.addClass("cropped-if-stretched")}function v(t,i,a){C(t,i)&&t.addClass("horizontal-misfit"),R(t,a)&&t.addClass("vertical-misfit")}function y(t,i,a){return Math.abs(t-i)>a.layout.croppingEpsilon}function C(t,i){return Math.abs(t.width()-i)>1}function R(t,i){return Math.abs(t.height()-i)>1}function I(t,i,a,e){for(var n=0,o=0;o<t.length;o++){var s=b(t[o],i,e);a&&(s=Math.floor(s)),n+=s}return n}function W(t,i,a){return i-(t.length-1)*a.layout.itemSpacing}function b(t,i,a){var e=H(t,!0,a)*i;return e}function H(t,i,a){var e=S+"-ratio",n=t.data(e);if(void 0===n&&(n=x(t,a),t.data(e,n)),i){if(n<=a.layout.minWidthHeightRatio)return a.layout.minWidthHeightRatio;if(n>=a.layout.maxWidthHeightRatio)return a.layout.maxWidthHeightRatio}return n}function x(t,i){var a=t.data(S+"-width"),e=t.data(S+"-height");if(void 0===a||void 0===e){var n=t.find(i.selectors.image);a=n.prop("naturalWidth"),e=n.prop("naturalHeight")}var o=a/e;return o}function j(t,i){var a=S+"-ratio";t.data(a,i)}function D(t){window.console&&console.log(M+": "+t)}t.fn.jpictura=function(a){var e=t.extend(!0,{},t.fn.jpictura.defaults,a);return this.each(function(){i(t(this),e)}),this};var M="jPictura",S=M.toLowerCase();t.fn.jpictura.defaults={selectors:{item:".item",image:"img"},classes:{container:S,item:S+"-item",image:S+"-image",lastRow:S+"-last-row",firstInRow:S+"-first-in-row",lastInRow:S+"-last-in-row",invisible:S+"-invisible"},layout:{rowPadding:0,applyRowPadding:!0,itemSpacing:5,applyItemSpacing:!0,idealRowHeight:180,minWidthHeightRatio:1/3,maxWidthHeightRatio:3,stretchImages:!0,allowCropping:!0,croppingEpsilon:3,centerImages:!0,justifyLastRow:!1},effects:{fadeInItems:!1},waitForImages:!0,heightCalculator:heightCalculator,algorithm:{epsilon:.01,maxIterationCount:100},debug:!1},t.fn.jpictura.evaluate=function(t,i){return Math.abs(t-i.layout.idealRowHeight)}}(jQuery);