var jpictura=jpictura||{};jpictura.debounce=function(t,i,a){var e;return function(){var n=this,o=arguments,r=function(){e=null,a||t.apply(n,o)},s=a&&!e;clearTimeout(e),e=setTimeout(r,i),s&&t.apply(n,o)}},jpictura.onWindowWidthResize=function(t){var i=$(window),a=i.width();i.resize(function(){var e=i.width();a!==e&&(t(),a=e)})};var jpictura=jpictura||{};jpictura.heightCalculator=function(t,i,a){function e(t){n(t),o(t),s()}function n(t){var i=0,a=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;l=t/((t-i)/a+e)}function o(t){var i=0,a=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;e*a>=t?(f.debug&&h("The max width/height ratio "+e+" is too big for row width "+t+"px."),c=t*e):c=t/((t+i)/a-e)}function r(t,i){var a,e,n=0;do a=d(t,g,!1,f),a>i?c=g:l=g,s(l,c),e=!1,a>i&&(e=!0),i-a>f.algorithm.epsilon&&(e=!0),++n>=f.algorithm.maxIterationCount&&(e=!1);while(e);return n>=f.algorithm.maxIterationCount&&f.debug&&h("Max "+n+" iterations reached. Current precision: "+(i-a)+"."),g}function s(){g=(l+c)/2}function u(t,i,a){t=Math.floor(t);var e;do e=d(i,t,!0,f);while(a>e&&t++);return t}var l,c,g,h=i,d=t,f=a;this.getHeight=function(t,i){if(0===t.length)return 0;e(i);var a=r(t,i);return a=u(a,t,i)}};/*!
 * jPictura v1.1.9
 * https://github.com/anmarcek/jpictura.git
 *
 * Copyright (c) 2014-2016 Anton Marček
 * Released under the MIT license
 *
 * Date: 2016-03-09T14:00:04.887Z
 */
var jpictura=jpictura||{};!function(t){function i(t,i){t.addClass(i.classes.container),t.toggleClass("stretch-images",i.layout.stretchImages),t.toggleClass("center-images",i.layout.centerImages),t.toggleClass("disable-cropping-images",!i.layout.allowCropping),t.toggleClass("fade-in-items",i.effects.fadeInItems);var e=t.find(i.selectors.item);e.addClass(i.classes.item),e.addClass(i.classes.invisible);var o=e.find(i.selectors.image);o.addClass(i.classes.image),a(t,e,i,n)}function a(t,i,a,n){a.waitForImages?e(t,i,a,n):n(t,i,a)}function e(i,a,e,n){function o(t,o){var s=o.width/o.height;D(t,s),++r===a.size()&&n(i,a,e)}var r=0;a.each(function(){var i=t(this),a=i.find(e.selectors.image),n=new Image;n.src=a.attr("src"),t(n).load(function(){o(i,n)})})}function n(t,i,a){var e=jpictura.debounce(function(){o(t,i,a)},250);a.responsive&&jpictura.onWindowWidthResize(e),e()}function o(i,a,e){var n=(new Date).getTime(),o=a.size(),l=[],c=i.width()-2*e.layout.rowPadding,g=new e.heightCalculator(j,P,e);a.each(function(i){var a=t(this),n=i+1===o;if(0===l.length)l.push(a);else{var h=l.slice(0);if(h.push(a),r(h,c,e)){var d=s(l,c,g,e),f=s(h,c,g,e),m=t.fn.jpictura.evaluate(d,e),p=t.fn.jpictura.evaluate(f,e);m>p?l.push(a):(u(l,c,d,n,e),l=[],l.push(a))}else l.push(a)}});var h=r(l,c,e)||e.layout.justifyLastRow?s(l,c,g,e):e.layout.idealRowHeight;u(l,c,h,!0,e);var d=(new Date).getTime();e.debug&&P("Gallery created in "+(d-n)+" milliseconds.")}function r(t,i,a){for(var e=(t.length-1)*a.layout.itemSpacing,n=0;n<t.length;n++)e+=b(t[n],a.layout.idealRowHeight,a);return e>i}function s(t,i,a,e){var n=W(t,i,e),o=a.getHeight(t,n);return o}function u(t,i,a,e,n){for(var o=j(t,a,!0,n),r=W(t,i,n),s={row:t,width:i,height:a,isLastRow:e,itemsSpaceWidth:r,itemsWidthDelta:o-r,unassignedItemsWidthDelta:o-r},u=l(t,n),g=0;g<u.length;g++)c(u[g],s,n)}function l(t,i){var a=t.slice(0);return a.sort(function(t,a){return H(a,!0,i)-H(t,!0,i)}),a}function c(t,i,a){var e=i.row,n=i.isLastRow,o=t===e[0],r=t===e[e.length-1],s=g(t,i,a),u=i.height,l=t.find(a.selectors.image);d(t,s,u),f(t,a),m(t,n,o,r,a),p(t,o,r,a),v(t,r,n,a),w(t,s,u,a),y(l,s,u,a)}function g(t,i,a){var e=b(t,i.height,a),n=h(e,i),o=Math.floor(e)-n;return o}function h(t,i){if(i.unassignedItemsWidthDelta<=0)return 0;var a=Math.ceil(t/i.itemsSpaceWidth*i.itemsWidthDelta);return i.unassignedItemsWidthDelta<a&&(a=i.unassignedItemsWidthDelta),i.unassignedItemsWidthDelta-=a,a}function d(t,i,a){t.width(i),t.height(a)}function f(t,i){t.removeClass(i.classes.invisible)}function m(t,i,a,e,n){t.toggleClass(n.classes.lastRow,i),t.toggleClass(n.classes.firstInRow,a),t.toggleClass(n.classes.lastInRow,e)}function p(t,i,a,e){e.layout.applyRowPadding&&(t.css("margin-left",(i?e.layout.rowPadding:0)+"px"),t.css("margin-right",(a?e.layout.rowPadding:0)+"px"))}function v(t,i,a,e){e.layout.applyItemSpacing&&(t.css("margin-right",(i?0:e.layout.itemSpacing)+"px"),t.css("margin-bottom",(a?0:e.layout.itemSpacing)+"px"))}function w(t,i,a,e){var n=H(t,!1,e)*a;t.toggleClass("stretch-by-height",n>=i),t.toggleClass("stretch-by-width",i>n);var o=C(n,i,e);t.toggleClass("cropped-if-stretched",o)}function y(t,i,a){t.toggleClass("horizontal-misfit",R(t,i)),t.toggleClass("vertical-misfit",I(t,a))}function C(t,i,a){return Math.abs(t-i)>a.layout.croppingEpsilon}function R(t,i){return Math.abs(t.width()-i)>1}function I(t,i){return Math.abs(t.height()-i)>1}function j(t,i,a,e){for(var n=0,o=0;o<t.length;o++){var r=b(t[o],i,e);a&&(r=Math.floor(r)),n+=r}return n}function W(t,i,a){return i-(t.length-1)*a.layout.itemSpacing}function b(t,i,a){var e=H(t,!0,a)*i;return e}function H(t,i,a){var e=L+"-ratio",n=t.data(e);if(void 0===n&&(n=x(t,a),t.data(e,n)),i){if(n<=a.layout.minWidthHeightRatio)return a.layout.minWidthHeightRatio;if(n>=a.layout.maxWidthHeightRatio)return a.layout.maxWidthHeightRatio}return n}function x(t,i){var a=M(t,i),e=S(t,i),n=a/e;return n}function D(t,i){var a=L+"-ratio";t.data(a,i)}function M(t,i){var a=L+"-width",e=t.data(a);if(void 0===e){var n=t.find(i.selectors.image);e=n.prop("naturalWidth"),t.data(a,e)}return e}function S(t,i){var a=L+"-height",e=t.data(a);if(void 0===e){var n=t.find(i.selectors.image);e=n.prop("naturalHeight"),t.data(a,e)}return e}function P(t){window.console&&console.log(z+": "+t)}t.fn.jpictura=function(a){var e=t.extend(!0,{},t.fn.jpictura.defaults,a);return this.each(function(){i(t(this),e)}),this};var z="jPictura",L=z.toLowerCase();t.fn.jpictura.defaults={selectors:{item:".item",image:"img"},classes:{container:L,item:L+"-item",image:L+"-image",lastRow:L+"-last-row",firstInRow:L+"-first-in-row",lastInRow:L+"-last-in-row",invisible:L+"-invisible"},layout:{rowPadding:0,applyRowPadding:!0,itemSpacing:5,applyItemSpacing:!0,idealRowHeight:180,minWidthHeightRatio:1/3,maxWidthHeightRatio:3,stretchImages:!0,allowCropping:!0,croppingEpsilon:3,centerImages:!0,justifyLastRow:!1},effects:{fadeInItems:!1},responsive:!0,waitForImages:!0,heightCalculator:jpictura.heightCalculator,algorithm:{epsilon:.01,maxIterationCount:100},debug:!1},t.fn.jpictura.evaluate=function(t,i){return Math.abs(t-i.layout.idealRowHeight)}}(jQuery);